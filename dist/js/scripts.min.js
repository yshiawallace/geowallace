"use strict";

/**
 * File customizer.js.
 *
 * Theme Customizer enhancements for a better user experience.
 *
 * Contains handlers to make Theme Customizer preview reload changes asynchronously.
 */
(function ($) {
  // Site title and description.
  wp.customize('blogname', function (value) {
    value.bind(function (to) {
      $('.site-title a').text(to);
    });
  });
  wp.customize('blogdescription', function (value) {
    value.bind(function (to) {
      $('.site-description').text(to);
    });
  }); // Header text color.

  wp.customize('header_textcolor', function (value) {
    value.bind(function (to) {
      if ('blank' === to) {
        $('.site-title, .site-description').css({
          'clip': 'rect(1px, 1px, 1px, 1px)',
          'position': 'absolute'
        });
      } else {
        $('.site-title, .site-description').css({
          'clip': 'auto',
          'position': 'relative'
        });
        $('.site-title a, .site-description').css({
          'color': to
        });
      }
    });
  });
})(jQuery);
"use strict";

// import PhotoSwipe from 'photoswipe/dist/photoswipe.js';
// import PhotoSwipeUI_Default from 'photoswipe/dist/photoswipe-ui-default.js';
var _require = require('photoswipe'),
    PhotoSwipe = _require.PhotoSwipe,
    PhotoSwipeUI_Default = _require.PhotoSwipeUI_Default;

var initPhotoSwipeFromDOM = function initPhotoSwipeFromDOM(gallerySelector) {
  // parse slide data (url, title, size ...) from DOM elements
  // (children of gallerySelector)
  var parseThumbnailElements = function parseThumbnailElements(el) {
    var thumbElements = el.childNodes,
        numNodes = thumbElements.length,
        items = [],
        figureEl,
        linkEl,
        size,
        item;

    for (var i = 0; i < numNodes; i++) {
      figureEl = thumbElements[i]; // <figure> element
      // include only element nodes

      if (figureEl.nodeType !== 1) {
        continue;
      }

      linkEl = figureEl.children[0]; // <a> element

      size = linkEl.getAttribute('data-size').split('x'); // create slide object

      item = {
        src: linkEl.getAttribute('href'),
        w: parseInt(size[0], 10),
        h: parseInt(size[1], 10)
      };

      if (figureEl.children.length > 1) {
        // <figcaption> content
        item.title = figureEl.children[1].innerHTML;
      }

      if (linkEl.children.length > 0) {
        // <img> thumbnail element, retrieving thumbnail url
        item.msrc = linkEl.children[0].getAttribute('src');
      }

      item.el = figureEl; // save link to element for getThumbBoundsFn

      items.push(item);
    }

    return items;
  }; // find nearest parent element


  var closest = function closest(el, fn) {
    return el && (fn(el) ? el : closest(el.parentNode, fn));
  }; // triggers when user clicks on thumbnail


  var onThumbnailsClick = function onThumbnailsClick(e) {
    e = e || window.event;
    e.preventDefault ? e.preventDefault() : e.returnValue = false;
    var eTarget = e.target || e.srcElement; // find root element of slide

    var clickedListItem = closest(eTarget, function (el) {
      return el.tagName && el.tagName.toUpperCase() === 'FIGURE';
    });

    if (!clickedListItem) {
      return;
    } // find index of clicked item by looping through all child nodes
    // alternatively, you may define index via data- attribute


    var clickedGallery = clickedListItem.parentNode,
        childNodes = clickedListItem.parentNode.childNodes,
        numChildNodes = childNodes.length,
        nodeIndex = 0,
        index;

    for (var i = 0; i < numChildNodes; i++) {
      if (childNodes[i].nodeType !== 1) {
        continue;
      }

      if (childNodes[i] === clickedListItem) {
        index = nodeIndex;
        break;
      }

      nodeIndex++;
    }

    if (index >= 0) {
      // open PhotoSwipe if valid index found
      openPhotoSwipe(index, clickedGallery);
    }

    return false;
  }; // parse picture index and gallery index from URL (#&pid=1&gid=2)


  var photoswipeParseHash = function photoswipeParseHash() {
    var hash = window.location.hash.substring(1),
        params = {};

    if (hash.length < 5) {
      return params;
    }

    var vars = hash.split('&');

    for (var i = 0; i < vars.length; i++) {
      if (!vars[i]) {
        continue;
      }

      var pair = vars[i].split('=');

      if (pair.length < 2) {
        continue;
      }

      params[pair[0]] = pair[1];
    }

    if (params.gid) {
      params.gid = parseInt(params.gid, 10);
    }

    return params;
  };

  var openPhotoSwipe = function openPhotoSwipe(index, galleryElement, disableAnimation, fromURL) {
    var pswpElement = document.querySelectorAll('.pswp')[0],
        gallery,
        options,
        items;
    items = parseThumbnailElements(galleryElement); // define options (if needed)

    options = {
      // define gallery index (for URL)
      galleryUID: galleryElement.getAttribute('data-pswp-uid'),
      getThumbBoundsFn: function getThumbBoundsFn(index) {
        // See Options -> getThumbBoundsFn section of documentation for more info
        var thumbnail = items[index].el.getElementsByTagName('img')[0],
            // find thumbnail
        pageYScroll = window.pageYOffset || document.documentElement.scrollTop,
            rect = thumbnail.getBoundingClientRect();
        return {
          x: rect.left,
          y: rect.top + pageYScroll,
          w: rect.width
        };
      }
    }; // PhotoSwipe opened from URL

    if (fromURL) {
      if (options.galleryPIDs) {
        // parse real index when custom PIDs are used
        // http://photoswipe.com/documentation/faq.html#custom-pid-in-url
        for (var j = 0; j < items.length; j++) {
          if (items[j].pid == index) {
            options.index = j;
            break;
          }
        }
      } else {
        // in URL indexes start from 1
        options.index = parseInt(index, 10) - 1;
      }
    } else {
      options.index = parseInt(index, 10);
    } // exit if index not found


    if (isNaN(options.index)) {
      return;
    }

    if (disableAnimation) {
      options.showAnimationDuration = 0;
    } // Pass data to PhotoSwipe and initialize it


    gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);
    gallery.init();
  }; // loop through all gallery elements and bind events


  var galleryElements = document.querySelectorAll(gallerySelector);

  for (var i = 0, l = galleryElements.length; i < l; i++) {
    galleryElements[i].setAttribute('data-pswp-uid', i + 1);
    galleryElements[i].onclick = onThumbnailsClick;
  } // Parse URL and open gallery if it contains #&pid=3&gid=1


  var hashData = photoswipeParseHash();

  if (hashData.pid && hashData.gid) {
    openPhotoSwipe(hashData.pid, galleryElements[hashData.gid - 1], true, true);
  }
}; // execute above function


initPhotoSwipeFromDOM('.gallery'); // Add button elements to mobile

(function () {
  var parentLinks = Array.from(document.querySelectorAll('.menu-item-has-children > a, .page_item_has_children > a'));
  var buttonHtml = '<button class="sub-menu-toggle js-sub-menu-toggle" aria-expanded="false"></button>';
  console.log(parentLinks);
  parentLinks.forEach(function (el) {
    el.addEventListener('mouseenter', function (e) {// console.log(e);
    }); //el.insertAdjacentHTML('afterend', buttonHtml);
  }); // Register click events button

  var button = Array.from(document.querySelectorAll('.js-sub-menu-toggle'));
  button.forEach(function (el) {
    el.addEventListener('click', function () {
      if (this.getAttribute('aria-expanded') === 'false') {
        this.setAttribute('aria-expanded', 'true');
        this.parentNode.classList.add('toggled-on');
      } else {
        this.setAttribute('aria-expanded', 'false');
        this.parentNode.classList.remove('toggled-on');
      }
    });
  });
})();
"use strict";

/**
 * File navigation.js.
 *
 * Handles toggling the navigation menu for small screens and enables TAB key
 * navigation support for dropdown menus.
 */
(function () {
  var container, button, menu, links, i, len;
  container = document.getElementById('site-navigation');

  if (!container) {
    return;
  }

  button = container.getElementsByTagName('button')[0];

  if ('undefined' === typeof button) {
    return;
  }

  menu = container.getElementsByTagName('ul')[0]; // Hide menu toggle button if menu is empty and return early.

  if ('undefined' === typeof menu) {
    button.style.display = 'none';
    return;
  }

  menu.setAttribute('aria-expanded', 'false');

  if (-1 === menu.className.indexOf('nav-menu')) {
    menu.className += ' nav-menu';
  }

  button.onclick = function () {
    if (-1 !== container.className.indexOf('toggled')) {
      container.className = container.className.replace(' toggled', '');
      button.setAttribute('aria-expanded', 'false');
      menu.setAttribute('aria-expanded', 'false');
    } else {
      container.className += ' toggled';
      button.setAttribute('aria-expanded', 'true');
      menu.setAttribute('aria-expanded', 'true');
    }
  }; // Get all the link elements within the menu.


  links = menu.getElementsByTagName('a'); // Each time a menu link is focused or blurred, toggle focus.

  for (i = 0, len = links.length; i < len; i++) {
    links[i].addEventListener('focus', toggleFocus, true);
    links[i].addEventListener('blur', toggleFocus, true);
  }
  /**
   * Sets or removes .focus class on an element.
   */


  function toggleFocus() {
    var self = this; // Move up through the ancestors of the current link until we hit .nav-menu.

    while (-1 === self.className.indexOf('nav-menu')) {
      // On li elements toggle the class .focus.
      if ('li' === self.tagName.toLowerCase()) {
        if (-1 !== self.className.indexOf('focus')) {
          self.className = self.className.replace(' focus', '');
        } else {
          self.className += ' focus';
        }
      }

      self = self.parentElement;
    }
  }
  /**
   * Toggles `focus` class to allow submenu access on tablets.
   */


  (function (container) {
    var touchStartFn,
        i,
        parentLink = container.querySelectorAll('.menu-item-has-children > a, .page_item_has_children > a');

    if ('ontouchstart' in window) {
      touchStartFn = function touchStartFn(e) {
        var menuItem = this.parentNode,
            i;

        if (!menuItem.classList.contains('focus')) {
          e.preventDefault();

          for (i = 0; i < menuItem.parentNode.children.length; ++i) {
            if (menuItem === menuItem.parentNode.children[i]) {
              continue;
            }

            menuItem.parentNode.children[i].classList.remove('focus');
          }

          menuItem.classList.add('focus');
        } else {
          menuItem.classList.remove('focus');
        }
      };

      for (i = 0; i < parentLink.length; ++i) {
        parentLink[i].addEventListener('touchstart', touchStartFn, false);
      }
    }
  })(container);
})();
"use strict";

/**
 * File skip-link-focus-fix.js.
 *
 * Helps with accessibility for keyboard only users.
 *
 * Learn more: https://git.io/vWdr2
 */
(function () {
  var isIe = /(trident|msie)/i.test(navigator.userAgent);

  if (isIe && document.getElementById && window.addEventListener) {
    window.addEventListener('hashchange', function () {
      var id = location.hash.substring(1),
          element;

      if (!/^[A-z0-9_-]+$/.test(id)) {
        return;
      }

      element = document.getElementById(id);

      if (element) {
        if (!/^(?:a|select|input|button|textarea)$/i.test(element.tagName)) {
          element.tabIndex = -1;
        }

        element.focus();
      }
    }, false);
  }
})();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImN1c3RvbWl6ZXIuanMiLCJtYWluLmpzIiwibmF2aWdhdGlvbi5qcyIsInNraXAtbGluay1mb2N1cy1maXguanMiXSwibmFtZXMiOlsiJCIsIndwIiwiY3VzdG9taXplIiwidmFsdWUiLCJiaW5kIiwidG8iLCJ0ZXh0IiwiY3NzIiwialF1ZXJ5IiwicmVxdWlyZSIsIlBob3RvU3dpcGUiLCJQaG90b1N3aXBlVUlfRGVmYXVsdCIsImluaXRQaG90b1N3aXBlRnJvbURPTSIsImdhbGxlcnlTZWxlY3RvciIsInBhcnNlVGh1bWJuYWlsRWxlbWVudHMiLCJlbCIsInRodW1iRWxlbWVudHMiLCJjaGlsZE5vZGVzIiwibnVtTm9kZXMiLCJsZW5ndGgiLCJpdGVtcyIsImZpZ3VyZUVsIiwibGlua0VsIiwic2l6ZSIsIml0ZW0iLCJpIiwibm9kZVR5cGUiLCJjaGlsZHJlbiIsImdldEF0dHJpYnV0ZSIsInNwbGl0Iiwic3JjIiwidyIsInBhcnNlSW50IiwiaCIsInRpdGxlIiwiaW5uZXJIVE1MIiwibXNyYyIsInB1c2giLCJjbG9zZXN0IiwiZm4iLCJwYXJlbnROb2RlIiwib25UaHVtYm5haWxzQ2xpY2siLCJlIiwid2luZG93IiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInJldHVyblZhbHVlIiwiZVRhcmdldCIsInRhcmdldCIsInNyY0VsZW1lbnQiLCJjbGlja2VkTGlzdEl0ZW0iLCJ0YWdOYW1lIiwidG9VcHBlckNhc2UiLCJjbGlja2VkR2FsbGVyeSIsIm51bUNoaWxkTm9kZXMiLCJub2RlSW5kZXgiLCJpbmRleCIsIm9wZW5QaG90b1N3aXBlIiwicGhvdG9zd2lwZVBhcnNlSGFzaCIsImhhc2giLCJsb2NhdGlvbiIsInN1YnN0cmluZyIsInBhcmFtcyIsInZhcnMiLCJwYWlyIiwiZ2lkIiwiZ2FsbGVyeUVsZW1lbnQiLCJkaXNhYmxlQW5pbWF0aW9uIiwiZnJvbVVSTCIsInBzd3BFbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZ2FsbGVyeSIsIm9wdGlvbnMiLCJnYWxsZXJ5VUlEIiwiZ2V0VGh1bWJCb3VuZHNGbiIsInRodW1ibmFpbCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicGFnZVlTY3JvbGwiLCJwYWdlWU9mZnNldCIsImRvY3VtZW50RWxlbWVudCIsInNjcm9sbFRvcCIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ4IiwibGVmdCIsInkiLCJ0b3AiLCJ3aWR0aCIsImdhbGxlcnlQSURzIiwiaiIsInBpZCIsImlzTmFOIiwic2hvd0FuaW1hdGlvbkR1cmF0aW9uIiwiaW5pdCIsImdhbGxlcnlFbGVtZW50cyIsImwiLCJzZXRBdHRyaWJ1dGUiLCJvbmNsaWNrIiwiaGFzaERhdGEiLCJwYXJlbnRMaW5rcyIsIkFycmF5IiwiZnJvbSIsImJ1dHRvbkh0bWwiLCJjb25zb2xlIiwibG9nIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJidXR0b24iLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJjb250YWluZXIiLCJtZW51IiwibGlua3MiLCJsZW4iLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlIiwiZGlzcGxheSIsImNsYXNzTmFtZSIsImluZGV4T2YiLCJyZXBsYWNlIiwidG9nZ2xlRm9jdXMiLCJzZWxmIiwidG9Mb3dlckNhc2UiLCJwYXJlbnRFbGVtZW50IiwidG91Y2hTdGFydEZuIiwicGFyZW50TGluayIsIm1lbnVJdGVtIiwiY29udGFpbnMiLCJpc0llIiwidGVzdCIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImlkIiwiZWxlbWVudCIsInRhYkluZGV4IiwiZm9jdXMiXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7Ozs7QUFRQSxDQUFFLFVBQVVBLENBQVYsRUFBYztBQUVmO0FBQ0FDLEVBQUFBLEVBQUUsQ0FBQ0MsU0FBSCxDQUFjLFVBQWQsRUFBMEIsVUFBVUMsS0FBVixFQUFrQjtBQUMzQ0EsSUFBQUEsS0FBSyxDQUFDQyxJQUFOLENBQVksVUFBVUMsRUFBVixFQUFlO0FBQzFCTCxNQUFBQSxD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QUFlO0FBQ2QsWUFBSyxDQUFJLHdDQUF3Q0osSUFBeEMsQ0FBOENJLE9BQU8sQ0FBQ3BGLE9BQXRELENBQVQsRUFBNkU7QUFDNUVvRixVQUFBQSxPQUFPLENBQUNDLFFBQVIsR0FBbUIsQ0FBQyxDQUFwQjtBQUNBOztBQUVERCxRQUFBQSxPQUFPLENBQUNFLEtBQVI7QUFDQTtBQUNELEtBakJELEVBaUJHLEtBakJIO0FBa0JBO0FBQ0QsQ0F2QkQiLCJmaWxlIjoic2NyaXB0cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEZpbGUgY3VzdG9taXplci5qcy5cbiAqXG4gKiBUaGVtZSBDdXN0b21pemVyIGVuaGFuY2VtZW50cyBmb3IgYSBiZXR0ZXIgdXNlciBleHBlcmllbmNlLlxuICpcbiAqIENvbnRhaW5zIGhhbmRsZXJzIHRvIG1ha2UgVGhlbWUgQ3VzdG9taXplciBwcmV2aWV3IHJlbG9hZCBjaGFuZ2VzIGFzeW5jaHJvbm91c2x5LlxuICovXG5cbiggZnVuY3Rpb24oICQgKSB7XG5cblx0Ly8gU2l0ZSB0aXRsZSBhbmQgZGVzY3JpcHRpb24uXG5cdHdwLmN1c3RvbWl6ZSggJ2Jsb2duYW1lJywgZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdHZhbHVlLmJpbmQoIGZ1bmN0aW9uKCB0byApIHtcblx0XHRcdCQoICcuc2l0ZS10aXRsZSBhJyApLnRleHQoIHRvICk7XG5cdFx0fSApO1xuXHR9ICk7XG5cdHdwLmN1c3RvbWl6ZSggJ2Jsb2dkZXNjcmlwdGlvbicsIGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHR2YWx1ZS5iaW5kKCBmdW5jdGlvbiggdG8gKSB7XG5cdFx0XHQkKCAnLnNpdGUtZGVzY3JpcHRpb24nICkudGV4dCggdG8gKTtcblx0XHR9ICk7XG5cdH0gKTtcblxuXHQvLyBIZWFkZXIgdGV4dCBjb2xvci5cblx0d3AuY3VzdG9taXplKCAnaGVhZGVyX3RleHRjb2xvcicsIGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHR2YWx1ZS5iaW5kKCBmdW5jdGlvbiggdG8gKSB7XG5cdFx0XHRpZiAoICdibGFuaycgPT09IHRvICkge1xuXHRcdFx0XHQkKCAnLnNpdGUtdGl0bGUsIC5zaXRlLWRlc2NyaXB0aW9uJyApLmNzcygge1xuXHRcdFx0XHRcdCdjbGlwJzogJ3JlY3QoMXB4LCAxcHgsIDFweCwgMXB4KScsXG5cdFx0XHRcdFx0J3Bvc2l0aW9uJzogJ2Fic29sdXRlJ1xuXHRcdFx0XHR9ICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkKCAnLnNpdGUtdGl0bGUsIC5zaXRlLWRlc2NyaXB0aW9uJyApLmNzcygge1xuXHRcdFx0XHRcdCdjbGlwJzogJ2F1dG8nLFxuXHRcdFx0XHRcdCdwb3NpdGlvbic6ICdyZWxhdGl2ZSdcblx0XHRcdFx0fSApO1xuXHRcdFx0XHQkKCAnLnNpdGUtdGl0bGUgYSwgLnNpdGUtZGVzY3JpcHRpb24nICkuY3NzKCB7XG5cdFx0XHRcdFx0J2NvbG9yJzogdG9cblx0XHRcdFx0fSApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fSApO1xufSApKCBqUXVlcnkgKTtcbiIsIi8vIGltcG9ydCBQaG90b1N3aXBlIGZyb20gJ3Bob3Rvc3dpcGUvZGlzdC9waG90b3N3aXBlLmpzJztcbi8vIGltcG9ydCBQaG90b1N3aXBlVUlfRGVmYXVsdCBmcm9tICdwaG90b3N3aXBlL2Rpc3QvcGhvdG9zd2lwZS11aS1kZWZhdWx0LmpzJztcbmNvbnN0IHsgUGhvdG9Td2lwZSwgUGhvdG9Td2lwZVVJX0RlZmF1bHQgfSA9IHJlcXVpcmUoJ3Bob3Rvc3dpcGUnKTtcblxudmFyIGluaXRQaG90b1N3aXBlRnJvbURPTSA9IGZ1bmN0aW9uKGdhbGxlcnlTZWxlY3Rvcikge1xuICAvLyBwYXJzZSBzbGlkZSBkYXRhICh1cmwsIHRpdGxlLCBzaXplIC4uLikgZnJvbSBET00gZWxlbWVudHNcbiAgLy8gKGNoaWxkcmVuIG9mIGdhbGxlcnlTZWxlY3RvcilcbiAgdmFyIHBhcnNlVGh1bWJuYWlsRWxlbWVudHMgPSBmdW5jdGlvbihlbCkge1xuICAgIHZhciB0aHVtYkVsZW1lbnRzID0gZWwuY2hpbGROb2RlcyxcbiAgICAgIG51bU5vZGVzID0gdGh1bWJFbGVtZW50cy5sZW5ndGgsXG4gICAgICBpdGVtcyA9IFtdLFxuICAgICAgZmlndXJlRWwsXG4gICAgICBsaW5rRWwsXG4gICAgICBzaXplLFxuICAgICAgaXRlbTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtTm9kZXM7IGkrKykge1xuICAgICAgZmlndXJlRWwgPSB0aHVtYkVsZW1lbnRzW2ldOyAvLyA8ZmlndXJlPiBlbGVtZW50XG5cbiAgICAgIC8vIGluY2x1ZGUgb25seSBlbGVtZW50IG5vZGVzXG4gICAgICBpZiAoZmlndXJlRWwubm9kZVR5cGUgIT09IDEpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGxpbmtFbCA9IGZpZ3VyZUVsLmNoaWxkcmVuWzBdOyAvLyA8YT4gZWxlbWVudFxuXG4gICAgICBzaXplID0gbGlua0VsLmdldEF0dHJpYnV0ZSgnZGF0YS1zaXplJykuc3BsaXQoJ3gnKTtcblxuICAgICAgLy8gY3JlYXRlIHNsaWRlIG9iamVjdFxuICAgICAgaXRlbSA9IHtcbiAgICAgICAgc3JjOiBsaW5rRWwuZ2V0QXR0cmlidXRlKCdocmVmJyksXG4gICAgICAgIHc6IHBhcnNlSW50KHNpemVbMF0sIDEwKSxcbiAgICAgICAgaDogcGFyc2VJbnQoc2l6ZVsxXSwgMTApXG4gICAgICB9O1xuXG4gICAgICBpZiAoZmlndXJlRWwuY2hpbGRyZW4ubGVuZ3RoID4gMSkge1xuICAgICAgICAvLyA8ZmlnY2FwdGlvbj4gY29udGVudFxuICAgICAgICBpdGVtLnRpdGxlID0gZmlndXJlRWwuY2hpbGRyZW5bMV0uaW5uZXJIVE1MO1xuICAgICAgfVxuXG4gICAgICBpZiAobGlua0VsLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gPGltZz4gdGh1bWJuYWlsIGVsZW1lbnQsIHJldHJpZXZpbmcgdGh1bWJuYWlsIHVybFxuICAgICAgICBpdGVtLm1zcmMgPSBsaW5rRWwuY2hpbGRyZW5bMF0uZ2V0QXR0cmlidXRlKCdzcmMnKTtcbiAgICAgIH1cblxuICAgICAgaXRlbS5lbCA9IGZpZ3VyZUVsOyAvLyBzYXZlIGxpbmsgdG8gZWxlbWVudCBmb3IgZ2V0VGh1bWJCb3VuZHNGblxuICAgICAgaXRlbXMucHVzaChpdGVtKTtcbiAgICB9XG4gICAgcmV0dXJuIGl0ZW1zO1xuICB9O1xuXG4gIC8vIGZpbmQgbmVhcmVzdCBwYXJlbnQgZWxlbWVudFxuICB2YXIgY2xvc2VzdCA9IGZ1bmN0aW9uIGNsb3Nlc3QoZWwsIGZuKSB7XG4gICAgcmV0dXJuIGVsICYmIChmbihlbCkgPyBlbCA6IGNsb3Nlc3QoZWwucGFyZW50Tm9kZSwgZm4pKTtcbiAgfTtcblxuICAvLyB0cmlnZ2VycyB3aGVuIHVzZXIgY2xpY2tzIG9uIHRodW1ibmFpbFxuICB2YXIgb25UaHVtYm5haWxzQ2xpY2sgPSBmdW5jdGlvbihlKSB7XG4gICAgZSA9IGUgfHwgd2luZG93LmV2ZW50O1xuICAgIGUucHJldmVudERlZmF1bHQgPyBlLnByZXZlbnREZWZhdWx0KCkgOiAoZS5yZXR1cm5WYWx1ZSA9IGZhbHNlKTtcblxuICAgIHZhciBlVGFyZ2V0ID0gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50O1xuXG4gICAgLy8gZmluZCByb290IGVsZW1lbnQgb2Ygc2xpZGVcbiAgICB2YXIgY2xpY2tlZExpc3RJdGVtID0gY2xvc2VzdChlVGFyZ2V0LCBmdW5jdGlvbihlbCkge1xuICAgICAgcmV0dXJuIGVsLnRhZ05hbWUgJiYgZWwudGFnTmFtZS50b1VwcGVyQ2FzZSgpID09PSAnRklHVVJFJztcbiAgICB9KTtcblxuICAgIGlmICghY2xpY2tlZExpc3RJdGVtKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gZmluZCBpbmRleCBvZiBjbGlja2VkIGl0ZW0gYnkgbG9vcGluZyB0aHJvdWdoIGFsbCBjaGlsZCBub2Rlc1xuICAgIC8vIGFsdGVybmF0aXZlbHksIHlvdSBtYXkgZGVmaW5lIGluZGV4IHZpYSBkYXRhLSBhdHRyaWJ1dGVcbiAgICB2YXIgY2xpY2tlZEdhbGxlcnkgPSBjbGlja2VkTGlzdEl0ZW0ucGFyZW50Tm9kZSxcbiAgICAgIGNoaWxkTm9kZXMgPSBjbGlja2VkTGlzdEl0ZW0ucGFyZW50Tm9kZS5jaGlsZE5vZGVzLFxuICAgICAgbnVtQ2hpbGROb2RlcyA9IGNoaWxkTm9kZXMubGVuZ3RoLFxuICAgICAgbm9kZUluZGV4ID0gMCxcbiAgICAgIGluZGV4O1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1DaGlsZE5vZGVzOyBpKyspIHtcbiAgICAgIGlmIChjaGlsZE5vZGVzW2ldLm5vZGVUeXBlICE9PSAxKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2hpbGROb2Rlc1tpXSA9PT0gY2xpY2tlZExpc3RJdGVtKSB7XG4gICAgICAgIGluZGV4ID0gbm9kZUluZGV4O1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIG5vZGVJbmRleCsrO1xuICAgIH1cblxuICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAvLyBvcGVuIFBob3RvU3dpcGUgaWYgdmFsaWQgaW5kZXggZm91bmRcbiAgICAgIG9wZW5QaG90b1N3aXBlKGluZGV4LCBjbGlja2VkR2FsbGVyeSk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICAvLyBwYXJzZSBwaWN0dXJlIGluZGV4IGFuZCBnYWxsZXJ5IGluZGV4IGZyb20gVVJMICgjJnBpZD0xJmdpZD0yKVxuICB2YXIgcGhvdG9zd2lwZVBhcnNlSGFzaCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBoYXNoID0gd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpLFxuICAgICAgcGFyYW1zID0ge307XG5cbiAgICBpZiAoaGFzaC5sZW5ndGggPCA1KSB7XG4gICAgICByZXR1cm4gcGFyYW1zO1xuICAgIH1cblxuICAgIHZhciB2YXJzID0gaGFzaC5zcGxpdCgnJicpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFycy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKCF2YXJzW2ldKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgdmFyIHBhaXIgPSB2YXJzW2ldLnNwbGl0KCc9Jyk7XG4gICAgICBpZiAocGFpci5sZW5ndGggPCAyKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgcGFyYW1zW3BhaXJbMF1dID0gcGFpclsxXTtcbiAgICB9XG5cbiAgICBpZiAocGFyYW1zLmdpZCkge1xuICAgICAgcGFyYW1zLmdpZCA9IHBhcnNlSW50KHBhcmFtcy5naWQsIDEwKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGFyYW1zO1xuICB9O1xuXG4gIHZhciBvcGVuUGhvdG9Td2lwZSA9IGZ1bmN0aW9uKGluZGV4LCBnYWxsZXJ5RWxlbWVudCwgZGlzYWJsZUFuaW1hdGlvbiwgZnJvbVVSTCkge1xuICAgIHZhciBwc3dwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wc3dwJylbMF0sXG4gICAgICBnYWxsZXJ5LFxuICAgICAgb3B0aW9ucyxcbiAgICAgIGl0ZW1zO1xuXG4gICAgaXRlbXMgPSBwYXJzZVRodW1ibmFpbEVsZW1lbnRzKGdhbGxlcnlFbGVtZW50KTtcblxuICAgIC8vIGRlZmluZSBvcHRpb25zIChpZiBuZWVkZWQpXG4gICAgb3B0aW9ucyA9IHtcbiAgICAgIC8vIGRlZmluZSBnYWxsZXJ5IGluZGV4IChmb3IgVVJMKVxuICAgICAgZ2FsbGVyeVVJRDogZ2FsbGVyeUVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXBzd3AtdWlkJyksXG5cbiAgICAgIGdldFRodW1iQm91bmRzRm46IGZ1bmN0aW9uKGluZGV4KSB7XG4gICAgICAgIC8vIFNlZSBPcHRpb25zIC0+IGdldFRodW1iQm91bmRzRm4gc2VjdGlvbiBvZiBkb2N1bWVudGF0aW9uIGZvciBtb3JlIGluZm9cbiAgICAgICAgdmFyIHRodW1ibmFpbCA9IGl0ZW1zW2luZGV4XS5lbC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaW1nJylbMF0sIC8vIGZpbmQgdGh1bWJuYWlsXG4gICAgICAgICAgcGFnZVlTY3JvbGwgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCxcbiAgICAgICAgICByZWN0ID0gdGh1bWJuYWlsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAgIHJldHVybiB7IHg6IHJlY3QubGVmdCwgeTogcmVjdC50b3AgKyBwYWdlWVNjcm9sbCwgdzogcmVjdC53aWR0aCB9O1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBQaG90b1N3aXBlIG9wZW5lZCBmcm9tIFVSTFxuICAgIGlmIChmcm9tVVJMKSB7XG4gICAgICBpZiAob3B0aW9ucy5nYWxsZXJ5UElEcykge1xuICAgICAgICAvLyBwYXJzZSByZWFsIGluZGV4IHdoZW4gY3VzdG9tIFBJRHMgYXJlIHVzZWRcbiAgICAgICAgLy8gaHR0cDovL3Bob3Rvc3dpcGUuY29tL2RvY3VtZW50YXRpb24vZmFxLmh0bWwjY3VzdG9tLXBpZC1pbi11cmxcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBpdGVtcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgIGlmIChpdGVtc1tqXS5waWQgPT0gaW5kZXgpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuaW5kZXggPSBqO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBpbiBVUkwgaW5kZXhlcyBzdGFydCBmcm9tIDFcbiAgICAgICAgb3B0aW9ucy5pbmRleCA9IHBhcnNlSW50KGluZGV4LCAxMCkgLSAxO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBvcHRpb25zLmluZGV4ID0gcGFyc2VJbnQoaW5kZXgsIDEwKTtcbiAgICB9XG5cbiAgICAvLyBleGl0IGlmIGluZGV4IG5vdCBmb3VuZFxuICAgIGlmIChpc05hTihvcHRpb25zLmluZGV4KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChkaXNhYmxlQW5pbWF0aW9uKSB7XG4gICAgICBvcHRpb25zLnNob3dBbmltYXRpb25EdXJhdGlvbiA9IDA7XG4gICAgfVxuXG4gICAgLy8gUGFzcyBkYXRhIHRvIFBob3RvU3dpcGUgYW5kIGluaXRpYWxpemUgaXRcbiAgICBnYWxsZXJ5ID0gbmV3IFBob3RvU3dpcGUocHN3cEVsZW1lbnQsIFBob3RvU3dpcGVVSV9EZWZhdWx0LCBpdGVtcywgb3B0aW9ucyk7XG4gICAgZ2FsbGVyeS5pbml0KCk7XG4gIH07XG5cbiAgLy8gbG9vcCB0aHJvdWdoIGFsbCBnYWxsZXJ5IGVsZW1lbnRzIGFuZCBiaW5kIGV2ZW50c1xuICB2YXIgZ2FsbGVyeUVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChnYWxsZXJ5U2VsZWN0b3IpO1xuXG4gIGZvciAodmFyIGkgPSAwLCBsID0gZ2FsbGVyeUVsZW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGdhbGxlcnlFbGVtZW50c1tpXS5zZXRBdHRyaWJ1dGUoJ2RhdGEtcHN3cC11aWQnLCBpICsgMSk7XG4gICAgZ2FsbGVyeUVsZW1lbnRzW2ldLm9uY2xpY2sgPSBvblRodW1ibmFpbHNDbGljaztcbiAgfVxuXG4gIC8vIFBhcnNlIFVSTCBhbmQgb3BlbiBnYWxsZXJ5IGlmIGl0IGNvbnRhaW5zICMmcGlkPTMmZ2lkPTFcbiAgdmFyIGhhc2hEYXRhID0gcGhvdG9zd2lwZVBhcnNlSGFzaCgpO1xuICBpZiAoaGFzaERhdGEucGlkICYmIGhhc2hEYXRhLmdpZCkge1xuICAgIG9wZW5QaG90b1N3aXBlKGhhc2hEYXRhLnBpZCwgZ2FsbGVyeUVsZW1lbnRzW2hhc2hEYXRhLmdpZCAtIDFdLCB0cnVlLCB0cnVlKTtcbiAgfVxufTtcblxuLy8gZXhlY3V0ZSBhYm92ZSBmdW5jdGlvblxuaW5pdFBob3RvU3dpcGVGcm9tRE9NKCcuZ2FsbGVyeScpO1xuXG4vLyBBZGQgYnV0dG9uIGVsZW1lbnRzIHRvIG1vYmlsZVxuKGZ1bmN0aW9uKCkge1xuICB2YXIgcGFyZW50TGlua3MgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZW51LWl0ZW0taGFzLWNoaWxkcmVuID4gYSwgLnBhZ2VfaXRlbV9oYXNfY2hpbGRyZW4gPiBhJykpO1xuICB2YXIgYnV0dG9uSHRtbCA9ICc8YnV0dG9uIGNsYXNzPVwic3ViLW1lbnUtdG9nZ2xlIGpzLXN1Yi1tZW51LXRvZ2dsZVwiIGFyaWEtZXhwYW5kZWQ9XCJmYWxzZVwiPjwvYnV0dG9uPic7XG4gIGNvbnNvbGUubG9nKHBhcmVudExpbmtzKTtcbiAgcGFyZW50TGlua3MuZm9yRWFjaChmdW5jdGlvbihlbCkge1xuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCBmdW5jdGlvbihlKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZyhlKTtcbiAgICB9KTtcbiAgICAvL2VsLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJlbmQnLCBidXR0b25IdG1sKTtcbiAgfSk7XG5cbiAgLy8gUmVnaXN0ZXIgY2xpY2sgZXZlbnRzIGJ1dHRvblxuICB2YXIgYnV0dG9uID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtc3ViLW1lbnUtdG9nZ2xlJykpO1xuXG4gIGJ1dHRvbi5mb3JFYWNoKGZ1bmN0aW9uKGVsKSB7XG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLmdldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcpID09PSAnZmFsc2UnKSB7XG4gICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ3RydWUnKTtcbiAgICAgICAgdGhpcy5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ3RvZ2dsZWQtb24nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyk7XG4gICAgICAgIHRoaXMucGFyZW50Tm9kZS5jbGFzc0xpc3QucmVtb3ZlKCd0b2dnbGVkLW9uJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufSkoKTtcbiIsIi8qKlxuICogRmlsZSBuYXZpZ2F0aW9uLmpzLlxuICpcbiAqIEhhbmRsZXMgdG9nZ2xpbmcgdGhlIG5hdmlnYXRpb24gbWVudSBmb3Igc21hbGwgc2NyZWVucyBhbmQgZW5hYmxlcyBUQUIga2V5XG4gKiBuYXZpZ2F0aW9uIHN1cHBvcnQgZm9yIGRyb3Bkb3duIG1lbnVzLlxuICovXG4oIGZ1bmN0aW9uKCkge1xuXHR2YXIgY29udGFpbmVyLCBidXR0b24sIG1lbnUsIGxpbmtzLCBpLCBsZW47XG5cblx0Y29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoICdzaXRlLW5hdmlnYXRpb24nICk7XG5cdGlmICggISBjb250YWluZXIgKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0YnV0dG9uID0gY29udGFpbmVyLmdldEVsZW1lbnRzQnlUYWdOYW1lKCAnYnV0dG9uJyApWzBdO1xuXHRpZiAoICd1bmRlZmluZWQnID09PSB0eXBlb2YgYnV0dG9uICkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdG1lbnUgPSBjb250YWluZXIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICd1bCcgKVswXTtcblxuXHQvLyBIaWRlIG1lbnUgdG9nZ2xlIGJ1dHRvbiBpZiBtZW51IGlzIGVtcHR5IGFuZCByZXR1cm4gZWFybHkuXG5cdGlmICggJ3VuZGVmaW5lZCcgPT09IHR5cGVvZiBtZW51ICkge1xuXHRcdGJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHRcdHJldHVybjtcblx0fVxuXG5cdG1lbnUuc2V0QXR0cmlidXRlKCAnYXJpYS1leHBhbmRlZCcsICdmYWxzZScgKTtcblx0aWYgKCAtMSA9PT0gbWVudS5jbGFzc05hbWUuaW5kZXhPZiggJ25hdi1tZW51JyApICkge1xuXHRcdG1lbnUuY2xhc3NOYW1lICs9ICcgbmF2LW1lbnUnO1xuXHR9XG5cblx0YnV0dG9uLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcblx0XHRpZiAoIC0xICE9PSBjb250YWluZXIuY2xhc3NOYW1lLmluZGV4T2YoICd0b2dnbGVkJyApICkge1xuXHRcdFx0Y29udGFpbmVyLmNsYXNzTmFtZSA9IGNvbnRhaW5lci5jbGFzc05hbWUucmVwbGFjZSggJyB0b2dnbGVkJywgJycgKTtcblx0XHRcdGJ1dHRvbi5zZXRBdHRyaWJ1dGUoICdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyApO1xuXHRcdFx0bWVudS5zZXRBdHRyaWJ1dGUoICdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb250YWluZXIuY2xhc3NOYW1lICs9ICcgdG9nZ2xlZCc7XG5cdFx0XHRidXR0b24uc2V0QXR0cmlidXRlKCAnYXJpYS1leHBhbmRlZCcsICd0cnVlJyApO1xuXHRcdFx0bWVudS5zZXRBdHRyaWJ1dGUoICdhcmlhLWV4cGFuZGVkJywgJ3RydWUnICk7XG5cdFx0fVxuXHR9O1xuXG5cdC8vIEdldCBhbGwgdGhlIGxpbmsgZWxlbWVudHMgd2l0aGluIHRoZSBtZW51LlxuXHRsaW5rcyAgICA9IG1lbnUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICdhJyApO1xuXG5cdC8vIEVhY2ggdGltZSBhIG1lbnUgbGluayBpcyBmb2N1c2VkIG9yIGJsdXJyZWQsIHRvZ2dsZSBmb2N1cy5cblx0Zm9yICggaSA9IDAsIGxlbiA9IGxpbmtzLmxlbmd0aDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdGxpbmtzW2ldLmFkZEV2ZW50TGlzdGVuZXIoICdmb2N1cycsIHRvZ2dsZUZvY3VzLCB0cnVlICk7XG5cdFx0bGlua3NbaV0uYWRkRXZlbnRMaXN0ZW5lciggJ2JsdXInLCB0b2dnbGVGb2N1cywgdHJ1ZSApO1xuXHR9XG5cblx0LyoqXG5cdCAqIFNldHMgb3IgcmVtb3ZlcyAuZm9jdXMgY2xhc3Mgb24gYW4gZWxlbWVudC5cblx0ICovXG5cdGZ1bmN0aW9uIHRvZ2dsZUZvY3VzKCkge1xuXHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdC8vIE1vdmUgdXAgdGhyb3VnaCB0aGUgYW5jZXN0b3JzIG9mIHRoZSBjdXJyZW50IGxpbmsgdW50aWwgd2UgaGl0IC5uYXYtbWVudS5cblx0XHR3aGlsZSAoIC0xID09PSBzZWxmLmNsYXNzTmFtZS5pbmRleE9mKCAnbmF2LW1lbnUnICkgKSB7XG5cblx0XHRcdC8vIE9uIGxpIGVsZW1lbnRzIHRvZ2dsZSB0aGUgY2xhc3MgLmZvY3VzLlxuXHRcdFx0aWYgKCAnbGknID09PSBzZWxmLnRhZ05hbWUudG9Mb3dlckNhc2UoKSApIHtcblx0XHRcdFx0aWYgKCAtMSAhPT0gc2VsZi5jbGFzc05hbWUuaW5kZXhPZiggJ2ZvY3VzJyApICkge1xuXHRcdFx0XHRcdHNlbGYuY2xhc3NOYW1lID0gc2VsZi5jbGFzc05hbWUucmVwbGFjZSggJyBmb2N1cycsICcnICk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c2VsZi5jbGFzc05hbWUgKz0gJyBmb2N1cyc7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0c2VsZiA9IHNlbGYucGFyZW50RWxlbWVudDtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogVG9nZ2xlcyBgZm9jdXNgIGNsYXNzIHRvIGFsbG93IHN1Ym1lbnUgYWNjZXNzIG9uIHRhYmxldHMuXG5cdCAqL1xuXHQoIGZ1bmN0aW9uKCBjb250YWluZXIgKSB7XG5cdFx0dmFyIHRvdWNoU3RhcnRGbiwgaSxcblx0XHRcdHBhcmVudExpbmsgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCggJy5tZW51LWl0ZW0taGFzLWNoaWxkcmVuID4gYSwgLnBhZ2VfaXRlbV9oYXNfY2hpbGRyZW4gPiBhJyApO1xuXG5cdFx0aWYgKCAnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cgKSB7XG5cdFx0XHR0b3VjaFN0YXJ0Rm4gPSBmdW5jdGlvbiggZSApIHtcblx0XHRcdFx0dmFyIG1lbnVJdGVtID0gdGhpcy5wYXJlbnROb2RlLCBpO1xuXG5cdFx0XHRcdGlmICggISBtZW51SXRlbS5jbGFzc0xpc3QuY29udGFpbnMoICdmb2N1cycgKSApIHtcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0Zm9yICggaSA9IDA7IGkgPCBtZW51SXRlbS5wYXJlbnROb2RlLmNoaWxkcmVuLmxlbmd0aDsgKytpICkge1xuXHRcdFx0XHRcdFx0aWYgKCBtZW51SXRlbSA9PT0gbWVudUl0ZW0ucGFyZW50Tm9kZS5jaGlsZHJlbltpXSApIHtcblx0XHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRtZW51SXRlbS5wYXJlbnROb2RlLmNoaWxkcmVuW2ldLmNsYXNzTGlzdC5yZW1vdmUoICdmb2N1cycgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0bWVudUl0ZW0uY2xhc3NMaXN0LmFkZCggJ2ZvY3VzJyApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdG1lbnVJdGVtLmNsYXNzTGlzdC5yZW1vdmUoICdmb2N1cycgKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdFx0Zm9yICggaSA9IDA7IGkgPCBwYXJlbnRMaW5rLmxlbmd0aDsgKytpICkge1xuXHRcdFx0XHRwYXJlbnRMaW5rW2ldLmFkZEV2ZW50TGlzdGVuZXIoICd0b3VjaHN0YXJ0JywgdG91Y2hTdGFydEZuLCBmYWxzZSApO1xuXHRcdFx0fVxuXHRcdH1cblx0fSggY29udGFpbmVyICkgKTtcbn0gKSgpO1xuIiwiLyoqXG4gKiBGaWxlIHNraXAtbGluay1mb2N1cy1maXguanMuXG4gKlxuICogSGVscHMgd2l0aCBhY2Nlc3NpYmlsaXR5IGZvciBrZXlib2FyZCBvbmx5IHVzZXJzLlxuICpcbiAqIExlYXJuIG1vcmU6IGh0dHBzOi8vZ2l0LmlvL3ZXZHIyXG4gKi9cbiggZnVuY3Rpb24oKSB7XG5cdHZhciBpc0llID0gLyh0cmlkZW50fG1zaWUpL2kudGVzdCggbmF2aWdhdG9yLnVzZXJBZ2VudCApO1xuXG5cdGlmICggaXNJZSAmJiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCAmJiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciApIHtcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggJ2hhc2hjaGFuZ2UnLCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBpZCA9IGxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKCAxICksXG5cdFx0XHRcdGVsZW1lbnQ7XG5cblx0XHRcdGlmICggISAoIC9eW0EtejAtOV8tXSskLy50ZXN0KCBpZCApICkgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0ZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCBpZCApO1xuXG5cdFx0XHRpZiAoIGVsZW1lbnQgKSB7XG5cdFx0XHRcdGlmICggISAoIC9eKD86YXxzZWxlY3R8aW5wdXR8YnV0dG9ufHRleHRhcmVhKSQvaS50ZXN0KCBlbGVtZW50LnRhZ05hbWUgKSApICkge1xuXHRcdFx0XHRcdGVsZW1lbnQudGFiSW5kZXggPSAtMTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGVsZW1lbnQuZm9jdXMoKTtcblx0XHRcdH1cblx0XHR9LCBmYWxzZSApO1xuXHR9XG59ICkoKTtcbiJdfQ==
